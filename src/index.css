@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme transitions */
.theme-transitioning {
  will-change: background-color, color, border-color;
}

.theme-transitioning * {
  transition-property: background-color, color, border-color, box-shadow;
  transition-duration: 0.3s;
  transition-timing-function: ease;
}

/* Skip transitions for performance */
.theme-transitioning canvas,
.theme-transitioning video,
.theme-transitioning iframe,
.theme-transitioning .no-transition,
.theme-transitioning .no-transition *,
.theme-transitioning [data-no-transition],
.theme-transitioning [data-no-transition] * {
  transition: none !important;
}

@layer base {
  :root {
    /* Light mode */
    --background: 210 40% 98%; 
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* Primary colors */
    --primary: 267 75% 40%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217 76% 85%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 262 83% 58%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    /* Navigation and borders */
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;

    /* Space theme specific variables */
    --space-bg-primary: #87CEEB;
    --space-bg-secondary: #E0F6FF;
    --space-bg-tertiary: #F0F8FF;
    --space-text-primary: #1a1a1a;
    --space-text-secondary: #4a4a4a;
    --space-panel-bg: rgba(255, 255, 255, 0.95);
    --space-border: rgba(0, 0, 0, 0.1);
    --space-shadow: rgba(0, 0, 0, 0.1);
  }  

  .dark {
    --background: 240 27% 8%;
    --foreground: 210 40% 98%;

    --card: 232 27% 12%;
    --card-foreground: 210 40% 98%;

    --popover: 240 27% 8%;
    --popover-foreground: 210 40% 98%;

    --primary: 267 75% 60%;
    --primary-foreground: 210 40% 98%;

    --secondary: 217 76% 25%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;

    /* Space theme specific variables */
    --space-bg-primary: #0f0f23;
    --space-bg-secondary: #1a1a2e;
    --space-bg-tertiary: #16213e;
    --space-text-primary: #ffffff;
    --space-text-secondary: #e2e8f0;
    --space-panel-bg: rgba(0, 0, 0, 0.9);
    --space-border: rgba(255, 255, 255, 0.1);
    --space-shadow: rgba(0, 0, 0, 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body {
    @apply bg-background text-foreground;
    will-change: background-color, color;
  }
  
  /* Ensure theme classes are inherited properly */
  html.dark, body.dark {
    color-scheme: dark;
  }
  
  html.light, body.light {
    color-scheme: light;
  }
}

/* Space component styling with optimizations */
.space-panel {
  backdrop-filter: blur(12px);
  border: 1px solid var(--space-border);
  background: var(--space-panel-bg);
  will-change: background-color, backdrop-filter;
}

.space-text-primary {
  color: var(--space-text-primary);
}

.space-text-secondary {
  color: var(--space-text-secondary);
}

.light .stars {
  opacity: 0.3;
}

.dark .stars {
  opacity: 1;
}

/* Theme-aware animations with reduced reflow */
@keyframes float {
  0%, 100% { transform: translate3d(0, 0, 0); }
  50% { transform: translate3d(0, -10px, 0); }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
  will-change: transform;
}

/* Space background effects with hardware acceleration */
.space-gradient {
  background: linear-gradient(to bottom,
    var(--space-bg-primary),
    var(--space-bg-secondary),
    var(--space-bg-tertiary)
  );
  transform: translateZ(0);
  will-change: background-image;
}

/* Space panel styling with optimized transitions */
.space-panel {
  background: rgba(0, 0, 0, 0.2);
  border-color: rgba(255, 255, 255, 0.1);
  will-change: background-color, border-color;
}

.dark .space-panel {
  background: rgba(0, 0, 0, 0.3);
  border-color: rgba(255, 255, 255, 0.1);
}
